services:

  # Umbrel App Proxy â€” routes Umbrel dashboard to YIIMP web UI (port 8888)
  app_proxy:
    image: getumbrel/app-proxy:1.0.0
    restart: on-failure
    environment:
      APP_HOST: "host.docker.internal"
      APP_PORT: "8888"
      PROXY_AUTH_ADD: "false"
    extra_hosts:
      - "host.docker.internal:host-gateway"
    volumes:
      - ${APP_DATA_DIR}/umbrel-app.yml:/extra/umbrel-app.yml:ro
    ports:
      - "8080:4000"

  # Bitcoin Core (SHA256 parent chain)
  bitcoind:
    image: lncm/bitcoind:v27.2
    restart: on-failure
    stop_grace_period: 15m
    volumes:
      - ${APP_DATA_DIR}/data/bitcoin:/data/.bitcoin
    command:
      - -server=1
      - -rpcuser=umbrel
      - -rpcpassword=${APP_PASSWORD:-umbrel}
      - -rpcallowip=0.0.0.0/0
      - -rpcbind=0.0.0.0
      - -rpcport=8332
      - -port=8333
      - -txindex=1
      - -printtoconsole
      - -dbcache=450
    ports:
      - "8332:8332"
      - "8333:8333"

  # Namecoin Core (SHA256 auxiliary chain, merge-mined with Bitcoin)
  namecoind:
    image: sevenrats/namecoin-core:latest
    restart: on-failure
    stop_grace_period: 15m
    volumes:
      - ${APP_DATA_DIR}/data/namecoin:/home/namecoin/.namecoin
    command:
      - namecoind
      - -server=1
      - -rpcuser=umbrel
      - -rpcpassword=${APP_PASSWORD:-umbrel}
      - -rpcallowip=0.0.0.0/0
      - -rpcbind=0.0.0.0
      - -rpcport=8336
      - -port=8334
      - -txindex=1
      - -printtoconsole
    ports:
      - "8336:8336"

  # Litecoin Core (Scrypt parent chain)
  litecoind:
    image: uphold/litecoin-core:0.21
    restart: on-failure
    stop_grace_period: 15m
    volumes:
      - ${APP_DATA_DIR}/data/litecoin:/home/litecoin/.litecoin
    command:
      - litecoind
      - -server=1
      - -rpcuser=umbrel
      - -rpcpassword=${APP_PASSWORD:-umbrel}
      - -rpcallowip=0.0.0.0/0
      - -rpcbind=0.0.0.0
      - -rpcport=9332
      - -port=9333
      - -txindex=1
      - -printtoconsole
    ports:
      - "9332:9332"
      - "9333:9333"

  # Dogecoin Core (Scrypt auxiliary chain, merge-mined with Litecoin)
  dogecoind:
    image: casperstack/dogecoin:latest
    restart: on-failure
    stop_grace_period: 15m
    volumes:
      - ${APP_DATA_DIR}/data/dogecoin:/root/.dogecoin
    command:
      - dogecoind
      - -server=1
      - -rpcuser=umbrel
      - -rpcpassword=${APP_PASSWORD:-umbrel}
      - -rpcallowip=0.0.0.0/0
      - -rpcbind=0.0.0.0
      - -rpcport=22555
      - -port=22556
      - -txindex=1
      - -printtoconsole
    ports:
      - "22555:22555"

  # Pepecoin Core (Scrypt auxiliary chain, merge-mined with Litecoin)
  pepecoind:
    image: pepeenthusiast/pepecoin-core:latest
    restart: on-failure
    stop_grace_period: 15m
    volumes:
      - ${APP_DATA_DIR}/data/pepecoin:/home/pepecoin/.pepecoin
    command:
      - pepecoind
      - -server=1
      - -rpcuser=umbrel
      - -rpcpassword=${APP_PASSWORD:-umbrel}
      - -rpcallowip=0.0.0.0/0
      - -rpcbind=0.0.0.0
      - -rpcport=29373
      - -port=29374
      - -printtoconsole
    ports:
      - "29373:29373"
